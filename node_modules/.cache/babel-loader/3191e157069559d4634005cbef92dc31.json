{"ast":null,"code":"import _slicedToArray from \"/home/karol/DashboardCurso/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/karol/DashboardCurso/src/views/TarefasList /TarefasList.js\";\nimport React, { useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/styles';\nimport { TarefasToolbar, TarefasTable } from './components';\nimport axios from 'axios';\nimport { Dialog, DialogContent, DialogActions } from '@material-ui/core';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    padding: theme.spacing(3)\n  },\n  content: {\n    marginTop: theme.spacing(2)\n  }\n}));\n\nconst TarefasList = () => {\n  const classes = useStyles();\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        tarefas = _useState2[0],\n        setTarefas = _useState2[1];\n\n  const API = 'https://minhastarefas-api.herokuapp.com/tarefas';\n  const headers_api = {\n    \"x-tenant-id\": \"karoolina.sm@gmail.com\"\n    /*\n    Função que salva a tarefa.\n    o axios faz um get na api \n    e se for sucesso então cria uma auxiliar \n    chamada novaTarefa que recebe o response.data e então \n    o setTarefas pega o valor de todo o array de tarefas + o novaTarefas\n    */\n\n  };\n\n  const salvar = tarefa => {\n    axios.post(API, tarefa, {\n      headers: headers_api\n    }).then(response => {\n      const novaTarefa = response.data;\n      setTarefas([...tarefas, novaTarefa]);\n    }).catch(erro => {\n      console.log(erro);\n    });\n  };\n\n  const listarTarefas = () => {\n    axios.get(API, {\n      headers: headers_api\n    }).then(response => {\n      const listaTarefas = response.data;\n      setTarefas(listaTarefas);\n    }).catch(erro => {\n      console.log(erro);\n    });\n  };\n\n  const alterarStatus = id => {\n    axios.patch(\"\".concat(API, \"/\").concat(id), null, {\n      headers: headers_api\n    }).then(response => {\n      const lista = [...tarefas];\n      lista.forEach(tarefa => {\n        if (tarefa.id === id) {\n          tarefa.done = true;\n        }\n\n        setTarefas(lista);\n      });\n    }).catch(erro => {\n      console.log(erro);\n    });\n  };\n\n  const deletar = id => {\n    axios.delete(\"\".concat(API, \"/\").concat(id), {\n      headers: headers_api\n    }).then(response => {\n      const lista = tarefas.filter(tarefa => tarefa.id !== id);\n      setTarefas(lista);\n    }).catch(erro => {\n      console.log(erro);\n    });\n  };\n\n  useEffect(() => {\n    listarTarefas();\n  }, []);\n  return React.createElement(\"div\", {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(TarefasToolbar, {\n    salvar: salvar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: classes.content,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(TarefasTable, {\n    deleteAction: deletar,\n    alterarStatus: alterarStatus,\n    tarefas: tarefas,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  })));\n};\n\nexport default TarefasList;","map":{"version":3,"sources":["/home/karol/DashboardCurso/src/views/TarefasList /TarefasList.js"],"names":["React","useEffect","useState","makeStyles","TarefasToolbar","TarefasTable","axios","Dialog","DialogContent","DialogActions","useStyles","theme","root","padding","spacing","content","marginTop","TarefasList","classes","tarefas","setTarefas","API","headers_api","salvar","tarefa","post","headers","then","response","novaTarefa","data","catch","erro","console","log","listarTarefas","get","listaTarefas","alterarStatus","id","patch","lista","forEach","done","deletar","delete","filter"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/styles';\n\nimport { TarefasToolbar, TarefasTable } from './components';\nimport axios from 'axios'\n\nimport {\n  Dialog,\n  DialogContent,\n  DialogActions\n} from '@material-ui/core'\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    padding: theme.spacing(3)\n  },\n  content: {\n    marginTop: theme.spacing(2)\n  }\n}));\n\nconst TarefasList = () => {\n  const classes = useStyles();\n\n  const [tarefas, setTarefas] = useState([]);\n\n  const API = 'https://minhastarefas-api.herokuapp.com/tarefas';\n  const headers_api = { \"x-tenant-id\": \"karoolina.sm@gmail.com\" }\n\n  /*\n  Função que salva a tarefa.\n  o axios faz um get na api \n  e se for sucesso então cria uma auxiliar \n  chamada novaTarefa que recebe o response.data e então \n  o setTarefas pega o valor de todo o array de tarefas + o novaTarefas\n  */\n  const salvar = (tarefa) => {\n    axios.post(API, tarefa, {\n      headers: headers_api\n    }).then(response => {\n      const novaTarefa = response.data\n      setTarefas([...tarefas, novaTarefa])\n    }).catch(erro => {\n      console.log(erro)\n    })\n  }\n\n  const listarTarefas = () => {\n    axios.get(API, {\n      headers: headers_api\n    }).then(response => {\n      const listaTarefas = response.data;\n      setTarefas(listaTarefas)\n    }).catch(erro => {\n      console.log(erro)\n    })\n  }\n  \n  const alterarStatus = (id) => {\n    axios.patch(`${API}/${id}`, null, {\n      headers: headers_api\n    }).then(response =>{\n      const lista = [...tarefas]\n      lista.forEach(tarefa =>{\n        if(tarefa.id === id){\n          tarefa.done = true\n        }\n        setTarefas(lista)\n      })\n    }).catch(erro=>{\n      console.log(erro)\n    })\n  }\n\n  const deletar = (id)=>{\n    axios.delete(`${API}/${id}`,{headers:headers_api})\n    .then(response=>{\n     const lista = tarefas.filter(tarefa => tarefa.id !== id)\n     setTarefas(lista)\n    }).catch(erro =>{\n      console.log(erro)\n    })\n  }\n  useEffect(() => {\n    listarTarefas();\n  }, [])\n\n  return (\n    <div className={classes.root}>\n      <TarefasToolbar salvar={salvar} />\n      <div className={classes.content}>\n        <TarefasTable \n        deleteAction={deletar}\n        alterarStatus={alterarStatus}\n        tarefas={tarefas} />\n      </div>\n    </div>\n  );\n};\n\nexport default TarefasList;\n"]},"metadata":{},"sourceType":"module"}