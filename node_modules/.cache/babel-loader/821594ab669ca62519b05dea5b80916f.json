{"ast":null,"code":"import _objectSpread from \"/home/karol/DashboardCurso/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport axios from 'axios';\nimport { mostrarMensagem } from './mensagensReducer';\nconst http = axios.create({\n  baseURL: 'https://minhastarefas-api.herokuapp.com/'\n});\nconst ACTIONS = {\n  LISTAR: 'TAREFAS_LISTAR',\n  ADD: 'TAREFAS_ADD',\n  REMOVER: 'TAREFAS_REMOVE',\n  UPDATE_STATUS: 'TAREFAS_UPDATE'\n};\nconst ESTADO_INICIAL = {\n  tarefas: [],\n  quantidade: 0\n};\nexport const tarefaReducer = (state = ESTADO_INICIAL, action) => {\n  switch (action.type) {\n    case ACTIONS.LISTAR:\n      return _objectSpread({}, state, {\n        tarefas: action.tarefas\n      });\n\n    case ACTIONS.ADD:\n      return _objectSpread({}, state, {\n        tarefas: [...state.tarefas, action.tarefa]\n      });\n\n    case ACTIONS.REMOVER:\n      const id = action.id;\n      const tarefas = state.tarefas.filter(tarefa => tarefa.id !== id);\n      return _objectSpread({}, state, {\n        tarefas: tarefas\n      });\n\n    case ACTIONS.UPDATE_STATUS:\n      const lista = [...state.tarefas];\n      lista.forEach(tarefa => {\n        if (tarefa.id === action.id) {\n          tarefa.done = true;\n        }\n      });\n      return _objectSpread({}, state, {\n        tarefas: lista\n      });\n\n    default:\n      return state;\n  }\n};\nexport function listar() {\n  return dispatch => {\n    http.get('/tarefas', {\n      headers: {\n        \"x-tenant-id\": localStorage.getItem('email_usuario_logado')\n      }\n    }).then(response => {\n      dispatch({\n        type: ACTIONS.LISTAR,\n        tarefas: response.data\n      });\n    });\n  };\n}\nexport function salvar(tarefa) {\n  return dispatch => {\n    http.post('/tarefas', tarefa, {\n      headers: {\n        \"x-tenant-id\": localStorage.getItem('email_usuario_logado')\n      }\n    }).then(response => {\n      dispatch([{\n        type: ACTIONS.ADD,\n        tarefa: response.data\n      }, mostrarMensagem('salvo com sucesso')]);\n    });\n  };\n}\nexport function deletar(id) {\n  return dispatch => {\n    http.delete(\"/tarefas/\".concat(id), {\n      headers: {\n        \"x-tenant-id\": localStorage.getItem('email_usuario_logado')\n      }\n    }).then(response => {\n      dispatch([{\n        type: ACTIONS.REMOVER,\n        id: id\n      }, mostrarMensagem('removido com sucesso')]);\n    });\n  };\n}\nexport function alterarStatus(id) {\n  return dispatch => {\n    http.patch(\"/tarefas/\".concat(id), null, {\n      headers: {\n        \"x-tenant-id\": localStorage.getItem('email_usuario_logado')\n      }\n    }).then(response => {\n      dispatch([{\n        type: ACTIONS.UPDATE_STATUS,\n        id: id\n      }, mostrarMensagem('status modificado com sucesso')]);\n    });\n  };\n}","map":{"version":3,"sources":["/home/karol/DashboardCurso/src/store/tarefasReducer.js"],"names":["axios","mostrarMensagem","http","create","baseURL","ACTIONS","LISTAR","ADD","REMOVER","UPDATE_STATUS","ESTADO_INICIAL","tarefas","quantidade","tarefaReducer","state","action","type","tarefa","id","filter","lista","forEach","done","listar","dispatch","get","headers","localStorage","getItem","then","response","data","salvar","post","deletar","delete","alterarStatus","patch"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport {mostrarMensagem} from './mensagensReducer'\n\nconst http = axios.create({\n    baseURL: 'https://minhastarefas-api.herokuapp.com/'\n})\nconst ACTIONS = {\n    LISTAR: 'TAREFAS_LISTAR',\n    ADD: 'TAREFAS_ADD',\n    REMOVER: 'TAREFAS_REMOVE',\n    UPDATE_STATUS: 'TAREFAS_UPDATE'\n}\nconst ESTADO_INICIAL = {\n    tarefas: [],\n    quantidade:0\n}\nexport const tarefaReducer = (state = ESTADO_INICIAL, action) => {\n    switch (action.type) {\n        case ACTIONS.LISTAR:\n            return { ...state, tarefas: action.tarefas }\n        case ACTIONS.ADD:\n            return { ...state, tarefas: [...state.tarefas, action.tarefa] }\n        case ACTIONS.REMOVER:\n            const id = action.id;\n            const tarefas =  state.tarefas.filter(tarefa => tarefa.id !== id)\n            return{...state, tarefas: tarefas}\n        case ACTIONS.UPDATE_STATUS:\n            const lista = [...state.tarefas]\n            lista.forEach(tarefa => {\n                if(tarefa.id === action.id){\n                    tarefa.done = true\n                }\n            })\n            return{...state, tarefas:lista}\n        default:\n            return state\n    }\n}\n\nexport function listar() {\n    return dispatch => {\n        http.get('/tarefas', {\n            headers: { \"x-tenant-id\": localStorage.getItem('email_usuario_logado') }\n        }).then(response => {\n            dispatch({\n                type: ACTIONS.LISTAR,\n                tarefas: response.data\n            })\n        })\n    }\n}\n\nexport function salvar(tarefa) {\n    return dispatch => {\n        http.post('/tarefas', tarefa, {\n            headers: { \"x-tenant-id\": localStorage.getItem('email_usuario_logado') }\n        }).then(response => {\n            dispatch([{\n                type: ACTIONS.ADD,\n                tarefa: response.data\n            },mostrarMensagem('salvo com sucesso')])\n        })\n    }\n}\n\nexport function deletar(id) {\n    return dispatch =>{\n        http.delete(`/tarefas/${id}`, {\n            headers: { \"x-tenant-id\": localStorage.getItem('email_usuario_logado')}\n        }).then(response =>{\n            dispatch([{\n                type: ACTIONS.REMOVER,\n                id:id\n            },mostrarMensagem('removido com sucesso')])\n        })\n    }\n}\n\nexport function alterarStatus(id){\n    return dispatch => {\n    http.patch(`/tarefas/${id}`, null , {\n        headers: { \"x-tenant-id\": localStorage.getItem('email_usuario_logado')}\n    }).then(response=>{\n        dispatch([{\n            type: ACTIONS.UPDATE_STATUS,\n            id: id\n        },mostrarMensagem('status modificado com sucesso')])\n    })\n}}"]},"metadata":{},"sourceType":"module"}